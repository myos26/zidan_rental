<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>Player</title>
</head>
<body>
  <audio id="bgm" loop muted></audio>

  <script>
    const audio = document.getElementById("bgm");

    // Load audio via blob agar tidak dianggap "download"
    fetch("backsound.mp3")
      .then(res => res.blob())
      .then(blob => {
        audio.src = URL.createObjectURL(blob);

        // Coba autoplay (muted dulu biar lolos Chrome)
        audio.play()
          .then(() => {
            console.log("Autoplay berhasil (dimulai dalam mode mute)");
            // Setelah 0.5 detik, naikkan volume pelan
            setTimeout(() => {
              audio.muted = false;
              audio.volume = 1;
              console.log("Volume fade-in aktif ðŸŽ§");
            }, 500);
          })
          .catch(err => {
            console.warn("Autoplay gagal:", err);
          });
      })
      .catch(err => console.error("Gagal memuat audio:", err));

    // Dengar pesan stop/play dari halaman utama
    window.addEventListener("message", (event) => {
      if (event.data === "stopBGM") {
        audio.pause();
        audio.currentTime = 0;
      }
    });
  </script>
</body>
</html>
